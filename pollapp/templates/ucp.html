<title>Change Password</title>
{% extends 'base.html' %}
{% block content %}
	<section>
		<div class = "wrapper">
			<div class = "form-box login">
				<h1>Change Password</h1>
				<form method = "POST" onsubmit="return validateForm()">
				{% csrf_token %}
					<div class = "input-box">
						<span class = "icon">
							<ion-icon name="lock-closed"></ion-icon>
						</span>
						<input type="password" id="password" name="pw1" required>
						<label>New Password</label>
					</div>
					<div class = "input-box">
						<span class = "icon">
							<ion-icon name="lock-closed"></ion-icon>
						</span>
						<input type="password" name="pw2" required>
						<label>Confirm New Password</label>
					</div>

					<div id="error-msg" style="color: #f67271; font-size: 14px;"></div>
					<div class = "message">
						{{ msg }}
					</div>

					<button type="submit">Reset Password</button>
				</form>
			</div>
		</div>
	</section>

	<style>
		section{
			display: flex;
			justify-content: center;
			align-items: center;
			width: 100%;
			height: 100%;
		}

		.wrapper{
			position: relative;
			width:400px;
			height: 420px;
			background: #373737;
			border: 2px solid rgba(255, 255, 255, .5);
			border-radius: 30px;
			backdrop-filter: blur(20px);
			box-shadow: 0 0 30px rgba(0, 0, 0, .5);
			display: flex;
			justify-content: center;
			align-items: center;
		}

		.wrapper .form-box{
			width: 100%;
			padding: 40px;
		}
			
		.form-box h1{
			font-size: 28px;
			color: #fff;
			text-align: center;
			margin-bottom: 40px;
		}

		.input-box{
			position: relative;
			width: 100%;
			height: 50px;
			border-bottom: 2px solid #162938;
			margin: 30px 0;
		}

		.message{
			font-size: 14px;
			color: #f67271;
			margin-bottom: 8px;
		}
		
		.input-box label{
			position: absolute;
			top: 50%;
			left: 5px;
			transform: translateY(-50%);
			font-size: 16px;
			color: #fff;
			font-weight: 500;
			pointer-events: none;
			transition: .5s;
		}

		.input-box input:focus~label,
		.input-box input:valid~label{
			top: -5px;
		}	

		.input-box input{
			width: 100%;
			height: 100%;
			background: transparent;
			border: none;
			outline: none;
			font-size: 16px;
			color: #fff;
			font-weight: 600;
			padding: 0 35px 0 5px;
		}

		.input-box .icon{
			position: absolute;
			right: 8px;
			font-size: 1.3em;
			color: #fff;
			line-height: 55px;
			bottom: 16px;
		}

		button{
			width: 100%;
			height: 45px;
			background: #fff;
			border: none;
			outline: none;
			border-radius: 30px;
			cursor: pointer;
			font-size: 16px;
			font-weight: 500;
			margin-top: 20px;
			transition: all 0.2s;
		}

		button:hover{
			background-color: #29fd53
		}

		@media (max-width: 450px){
			.wrapper{
				width: 100%;
				height: 100vh;
				border: none;
				border-radius: 0;
				background: #222327;
				box-shadow: none;
			}
		}
	</style>

	<script>
		function validateForm() {
			var password = document.getElementById("password").value;
			var errorElement = document.getElementById("error-msg");

			if (password.length < 8 || password.length > 20) {
				errorElement.innerHTML = "Password must be at least 8 characters long.";
				return false;
      			}

			errorElement.innerHTML = "";
			return true;
		}
	</script>

	<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
	<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
{% endblock %}